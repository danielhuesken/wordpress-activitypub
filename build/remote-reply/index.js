(()=>{"use strict";var e,t={786:(e,t,a)=>{const r=window.React,i=window.wp.element,o=window.wp.domReady;var l=a.n(o);const n=window.wp.components,c=window.wp.i18n,m=(0,i.forwardRef)((function({icon:e,size:t=24,...a},r){return(0,i.cloneElement)(e,{width:t,height:t,...a,ref:r})})),p=window.wp.primitives,s=(0,r.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(p.Path,{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L13.0607 12L15.5303 14.4697C15.8232 14.7626 15.8232 15.2374 15.5303 15.5303C15.2374 15.8232 14.7626 15.8232 14.4697 15.5303L12 13.0607L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L10.9393 12L8.46967 9.53033C8.17678 9.23744 8.17678 8.76256 8.46967 8.46967C8.76256 8.17678 9.23744 8.17678 9.53033 8.46967L12 10.9393L14.4697 8.46967C14.7626 8.17678 15.2374 8.17678 15.5303 8.46967Z"})),u=window.wp.apiFetch;var d=a.n(u);const v=(0,r.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(p.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"})),y=(0,r.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(p.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),b=(0,r.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(p.Path,{d:"M15.5 9.5a1 1 0 100-2 1 1 0 000 2zm0 1.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm-2.25 6v-2a2.75 2.75 0 00-2.75-2.75h-4A2.75 2.75 0 003.75 15v2h1.5v-2c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v2h1.5zm7-2v2h-1.5v-2c0-.69-.56-1.25-1.25-1.25H15v-1.5h2.5A2.75 2.75 0 0120.25 15zM9.5 8.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",fillRule:"evenodd"})),_=window.wp.compose,f="fediverse-remote-user";function w(){const[e,t]=(0,i.useState)(function(){const e=localStorage.getItem(f);return e?JSON.parse(e):{}}()),a=(0,i.useCallback)((e=>{!function(e){localStorage.setItem(f,JSON.stringify(e))}(e),t(e)}),[]),r=(0,i.useCallback)((()=>{localStorage.removeItem(f),t({})}),[]);return{template:e?.template||!1,profileURL:e?.profileURL||!1,setRemoteUser:a,deleteRemoteUser:r}}function h(e){try{return new URL(e),!0}catch(e){return!1}}function E({actionText:e,copyDescription:t,handle:a,resourceUrl:o,myProfile:l=!1,rememberProfile:p=!1}){const s=(0,c.__)("Loading...","activitypub"),u=(0,c.__)("Opening...","activitypub"),f=(0,c.__)("Error","activitypub"),E=(0,c.__)("Invalid","activitypub"),g=l||(0,c.__)("My Profile","activitypub"),[C,R]=(0,i.useState)(e),[k,L]=(0,i.useState)(v),x=(0,_.useCopyToClipboard)(a,(()=>{L(y),setTimeout((()=>L(v)),1e3)})),[O,U]=(0,i.useState)(""),[S,N]=(0,i.useState)(!0),{setRemoteUser:P}=w(),M=(0,i.useCallback)((()=>{let t;if(!h(O)&&!function(e){const t=e.replace(/^@/,"").split("@");return 2===t.length&&h(`https://${t[1]}`)}(O))return R(E),t=setTimeout((()=>R(e)),2e3),()=>clearTimeout(t);const a=o+O;R(s),d()({path:a}).then((({url:t,template:a})=>{S&&P({profileURL:O,template:a}),R(u),setTimeout((()=>{window.open(t,"_blank"),R(e)}),200)})).catch((()=>{R(f),setTimeout((()=>R(e)),2e3)}))}),[O]);return(0,r.createElement)("div",{className:"activitypub__dialog",role:"dialog","aria-labelledby":"dialog-title"},(0,r.createElement)("div",{className:"activitypub-dialog__section"},(0,r.createElement)("h4",{id:"dialog-title"},g),(0,r.createElement)("div",{className:"activitypub-dialog__description",id:"copy-description"},t),(0,r.createElement)("div",{className:"activitypub-dialog__button-group"},(0,r.createElement)("label",{htmlFor:"profile-handle",className:"screen-reader-text"},t),(0,r.createElement)("input",{type:"text",id:"profile-handle",value:a,readOnly:!0}),(0,r.createElement)(n.Button,{ref:x,"aria-label":(0,c.__)("Copy handle to clipboard","activitypub")},(0,r.createElement)(m,{icon:k}),(0,c.__)("Copy","activitypub")))),(0,r.createElement)("div",{className:"activitypub-dialog__section"},(0,r.createElement)("h4",{id:"remote-profile-title"},(0,c.__)("Your Profile","activitypub")),(0,r.createElement)("div",{className:"activitypub-dialog__description",id:"remote-profile-description"},(0,i.createInterpolateElement)((0,c.__)("Or, if you know your own profile, we can start things that way! (eg <code>@yourusername@example.com</code>)","activitypub"),{code:(0,r.createElement)("code",null)})),(0,r.createElement)("div",{className:"activitypub-dialog__button-group"},(0,r.createElement)("label",{htmlFor:"remote-profile",className:"screen-reader-text"},(0,c.__)("Enter your ActivityPub profile","activitypub")),(0,r.createElement)("input",{type:"text",id:"remote-profile",value:O,onKeyDown:e=>{"Enter"===e?.code&&M()},onChange:e=>U(e.target.value),"aria-invalid":C===E}),(0,r.createElement)(n.Button,{onClick:M,"aria-label":(0,c.__)("Submit profile","activitypub")},(0,r.createElement)(m,{icon:b}),C)),p&&(0,r.createElement)("div",{className:"activitypub-dialog__remember"},(0,r.createElement)(n.CheckboxControl,{checked:S,label:(0,c.__)("Remember me for easier comments","activitypub"),onChange:()=>{N(!S)}}))))}function g({selectedComment:e,commentId:t}){const{namespace:a}=window._activityPubOptions||{},i=(0,c.__)("Reply","activitypub"),o=`/${a}/comments/${t}/remote-reply?resource=`,l=(0,c.__)("Copy and paste the Comment URL into the search field of your favorite fediverse app or server.","activitypub");return(0,r.createElement)(E,{actionText:i,copyDescription:l,handle:e,resourceUrl:o,myProfile:(0,c.__)("Original Comment URL","activitypub"),rememberProfile:!0})}function C({profileURL:e,template:t,commentURL:a,deleteRemoteUser:i}){return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(n.Button,{variant:"link",className:"comment-reply-link activitypub-remote-reply__button",onClick:()=>{const e=t.replace("{uri}",a);window.open(e,"_blank")}},(0,c.sprintf)((0,c.__)("Reply as %s","activitypub"),e)),(0,r.createElement)(n.Button,{className:"activitypub-remote-profile-delete",onClick:i,title:(0,c.__)("Delete Remote Profile","activitypub")},(0,r.createElement)(m,{icon:s,size:18})))}function R({selectedComment:e,commentId:t}){const[a,o]=(0,i.useState)(!1),l=(0,c.__)("Remote Reply","activitypub"),{profileURL:m,template:p,deleteRemoteUser:s}=w(),u=m&&p;return(0,r.createElement)(r.Fragment,null,u?(0,r.createElement)(C,{profileURL:m,template:p,commentURL:e,deleteRemoteUser:s}):(0,r.createElement)(n.Button,{variant:"link",className:"comment-reply-link activitypub-remote-reply__button",onClick:()=>o(!0)},(0,c.__)("Reply on the Fediverse","activitypub")),a&&(0,r.createElement)(n.Modal,{className:"activitypub-remote-reply__modal activitypub__modal",onRequestClose:()=>o(!1),title:l},(0,r.createElement)(g,{selectedComment:e,commentId:t})))}let k=1;l()((()=>{[].forEach.call(document.querySelectorAll(".activitypub-remote-reply"),(e=>{const t=JSON.parse(e.dataset.attrs);(0,i.createRoot)(e).render((0,r.createElement)(R,{...t,id:"activitypub-remote-reply-link-"+k++,useId:!0}))}))}))}},a={};function r(e){var i=a[e];if(void 0!==i)return i.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,a,i,o)=>{if(!a){var l=1/0;for(p=0;p<e.length;p++){for(var[a,i,o]=e[p],n=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(n=!1,o<l&&(l=o));if(n){e.splice(p--,1);var m=i();void 0!==m&&(t=m)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[a,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={227:0,739:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var i,o,[l,n,c]=a,m=0;if(l.some((t=>0!==e[t]))){for(i in n)r.o(n,i)&&(r.m[i]=n[i]);if(c)var p=c(r)}for(t&&t(a);m<l.length;m++)o=l[m],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(p)},a=globalThis.webpackChunkwordpress_activitypub=globalThis.webpackChunkwordpress_activitypub||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=r.O(void 0,[739],(()=>r(786)));i=r.O(i)})();